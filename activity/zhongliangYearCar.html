<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title></title>
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1">
<script src="<{asset:js/jquery/jquery-1.8.3.min.js}>"></script>
<script type= "text/javascript" >
// alert(window.screen.width)
if (/Android (\d+\.\d+)/.test(navigator.userAgent)){//安卓
  var  version = parseFloat(RegExp.$1);
  if (version>2.3){
    var  phoneScale = parseInt(window.screen.width)/750;
    document.write( '<meta name="viewport" content="width=750, minimum-scale = ' + phoneScale + ', maximum-scale = ' + phoneScale + ', target-densitydpi=device-dpi">' );
  } else {
    document.write( '<meta name="viewport" content="width=750, target-densitydpi=device-dpi">' );
  }
} else {
  document.write( '<meta name="viewport" content="width=750, user-scalable=no, target-densitydpi=device-dpi">' );
}
if (navigator.userAgent.indexOf( 'MicroMessenger' ) >= 0){//微信去掉下方刷新栏
  document.addEventListener( 'WeixinJSBridgeReady' ,  function () {
    //WeixinJSBridge.call('hideToolbar');
  });
}
String.prototype.isPhone = function(){
  return /^((1[3578]{1})+\d{9})$/.test(this);
};
function addLoadEvent(func) { // 解决多个window.onload问题 
  var oldonload = window.onload; 
  if (typeof window.onload != 'function') { 
   window.onload = func; 
  } else { 
    window.onload = function() { 
      oldonload(); 
      func(); 
     } 
  } 
} 

function $$(dom){
	document.querySelector(dom).css = function(json){
		for(var name in json){
			this.style[name] = json[name];
		}
		
	}
	return document.querySelector(dom);
}

</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-18761483-4', 'auto');  ga('send', 'pageview');
</script>
<!-- 百度统计： -->
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?24b50d3a9a73a0efd25feab8f04d313f";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>
	<style>
	/*music*/
	.music_ani {
    -webkit-animation: music 2s linear infinite;
    animation: music 2s linear infinite;
}

.music {
    width: 43px;
    height: 42px;
    position: absolute;
    top: 62px;
    right: 26px;
    z-index: 999;
    background: url('http://i3.yongche.name/u/images/201601/2706009813.png?1452798600') no-repeat center center;
}
@-webkit-keyframes music {
  0% {
    -webkit-transform:rotate(0deg);
  }

  100% {
    -webkit-transform:rotate(360deg);
  }
}
@keyframes music {
  0% {
    transform:rotate(0deg);
  }

  100% {
    transform:rotate(360deg);
  }
}	/*music*/
	.a1{ background: url(http://i1.yongche.name/media/g1/M03/08/23/rBEAQ1aXn7KIWTuMAAEXhv_ukWMAADZNQOnzwsAARee370.jpg?1452798600) no-repeat;}
	.a2{ background: url(http://i1.yongche.name/media/g1/M04/08/26/rBEARFaYnQOIO8WPAAFSwrwgGyQAADaQQP2ThoAAVLa631.jpg?1452798600) no-repeat;}
	.a3{ background: url(http://i1.yongche.name/media/g1/M03/08/23/rBEAQ1aXfZ2IYKutAAEBpTLt_U8AADZCwPvFcYAAQG9006.jpg?1452798600) no-repeat;}
	.a3 a {display: block;position: absolute;height: 120px; width: 408px; left: 50%; margin-left: -204px; background: url(http://i3.yongche.name/media/g1/M03/08/23/rBEAQ1aXc9mIY5SzAABrpuSaLFAAADZBAJdY1oAAGu-869.png?1452798600) no-repeat;}
	a#want{top:800px; background-position: 0 0;}
	a#send{top:970px; background-position: 0 -120px;}

	*{ margin: 0; padding: 0; list-style: none;}
	html{ font-size: 20px; background:#F7EEE7;}
	.wrap{ width: 750px; height: 1206px; overflow: hidden;}
	.wrap ul{width:750px;}
	.wrap ul li{ width: 750px; height: 1206px; background-size: contain; position: relative;}

.hint2 { height: 27px; width: 36px; z-index: 99; position: absolute; left: 50%; margin-left: -14px; opacity: 1; bottom: 55px; -webkit-animation: hint-move 1.2s infinite ease; background: url(http://i3.yongche.name/media/g1/M02/08/16/rBEARFaXsfaIa44UAAAG7mwKSYEAADUNgP_-PcAAAcJ421.png?1452798600) no-repeat center bottom; background-size: 100% auto; }
@-webkit-keyframes hint-move { 
    0% { opacity: 0; bottom: 60px; }
   70% { opacity: 1; bottom: 55px; }
  100% { opacity: 0; bottom: 60px; }
}
.sprite {display:inline-block; overflow:hidden; background-repeat: no-repeat;background-image:url(http://i1.yongche.name/media/g1/M01/08/23/rBEARFaXnYWIXKttAAFLbPfWkKUAADZMwIeCisAAUuE704.png?1452798600); position: absolute;}

.w1           {width:579px; height:148px; background-position: -2px -84px;    left: 50%; top: 200px; margin-left:-290px;}
.w2           {width:672px; height:80px;  background-position: -2px -2px;     left: 50%; top: 360px; margin-left:-336px;}
.w3a          {width:375px; height:140px; background-position: -583px -184px; left: 60px; top: 515px; 
	transform: perspective(800px) rotateY(-90deg) rotateX(0deg);transform-style: preserve-3d; opacity: 0}
.w3b          {width:259px; height:97px;  background-position: -2px -366px;   left: 440px; top: 522px;
	transform: perspective(800px) rotateY(-90deg) rotateX(0deg);transform-style: preserve-3d; opacity: 0}
.w4a          {width:336px; height:130px; background-position: -2px -234px;   left: 90px; top: 610px;
	transform: perspective(800px) rotateY(-90deg) rotateX(0deg);transform-style: preserve-3d; opacity: 0}
.w4b          {width:154px; height:95px;  background-position: -302px -415px; left: 422px; top: 614px;
	transform: perspective(800px) rotateY(-90deg) rotateX(0deg);transform-style: preserve-3d; opacity: 0}
.ww5          {width:405px; height:180px; background-position: -676px -2px;   left: 131px; top: 715px;
	transform: perspective(800px) rotateY(-90deg) rotateX(0deg);transform-style: preserve-3d; opacity: 0}
.w6a          {width:192px; height:179px; background-position: -579px -326px; left: 60px;  top: 986px;}
.w6b          {width:280px; height:179px; background-position: -960px -302px; left: 235px; top: 986px;}
.w6c          {width:237px; height:179px; background-position: -340px -234px; left: 470px; top: 986px;}
.denglong     {width:75px;  height:298px; background-position: -1083px -2px;  left: 76px; top: 727px;}
.flower_left  {width:111px; height:74px;  background-position: -458px -415px; left: 58px; top: 500px;}
.flower_right {width:98px;  height:93px;  background-position: -960px -184px; left: 531px; top: 724px;}
.money1       {width:37px;  height:52px;  background-position: -263px -366px; left: 630px; top: 476px;}
.money2       {width:62px;  height:71px;  background-position: -583px -84px;  left: 40px; top: 657px;}
.money3       {width:111px; height:123px; background-position: -773px -326px; left: 613px; top: 695px;}
li.a1 {position: relative;}
li.a1 div{transition:1s all cubic-bezier(0.5,-0.51, 0.32, 1.88)}
</style>
</head>
<body>
	<div class="wrap" id="wrap">
	<div class="music music_ani"></div>
		<ul id="setHeight">
			<li class="a1">
				<div class="sprite w1"></div>
				<div class="sprite w2"></div>
				<div class="sprite w3a"></div>
				<div class="sprite w3b"></div>
				<div class="sprite w4a"></div>
				<div class="sprite w4b"></div>
				<div class="sprite ww5"></div>
				<div class="sprite w6a"></div>
				<div class="sprite w6b"></div>
				<div class="sprite w6c"></div>
				<div class="sprite denglong"></div>
				<div class="sprite flower_left"></div>
				<div class="sprite flower_right"></div>
				<div class="sprite money1"></div>
				<div class="sprite money2"></div>
				<div class="sprite money3"></div>
			</li>
			<li class="a2"></li>
			<li class="a3">
				<a href="" id="want"></a>
				<a href="" id="send"></a>
			</li>
		</ul>
	</div>


<script>
window.onload=window.onresize=function(){
	document.documentElement.style.fontSize=document.documentElement.clientWidth/16+'px';	
};
document.addEventListener('DOMContentLoaded', function(){
	var oWrap = document.querySelector(".wrap");
	var oUl   = document.querySelector('.wrap ul');
	var aLi   = oUl.children;
	var y = 0,space = 50,iNow = 0;
	oWrap.addEventListener('touchstart',function(ev){
		var startY = ev.targetTouches[0].pageY;
		var disY = startY - y;
		oUl.style.WebkitTransition = 'none';
		function fnMove(ev){
			y = ev.targetTouches[0].pageY-disY;
			// oUl.style.WebkitTransform = 'translateY('+y+'px)';
			ev.preventDefault();
		}
		function fnEnd(ev){
			oWrap.removeEventListener('touchmove',fnMove,false);
			oWrap.removeEventListener('touchend',fnEnd,false);
			// console.log(y);
			var upY = ev.changedTouches[0].pageY;
			if(Math.abs(upY-startY)>space){
				if(startY>upY){//开始>结束
					iNow++;
					if(iNow>=aLi.length)iNow=aLi.length-1;
				} else {
					iNow--;
					if(iNow<=0)iNow=0;
				}
			}
			console.log(iNow)
			if(iNow==0){
				pageOne()
			} else if(iNow>0){
				$$('.w3a').css({opacity: '0',});
				$$('.w3b').css({opacity: '0',});
				$$('.w4a').css({opacity: '0',});
				$$('.w4b').css({opacity: '0',});
				$$('.ww5').css({opacity: '0',});
			}
			y = -iNow*aLi[0].offsetHeight;
			oUl.style.WebkitTransition = '1s all ease';
			oUl.style.WebkitTransform  = 'translateY('+y+'px)';
			// ev.preventDefault();
		}
		oWrap.addEventListener("touchmove",fnMove,false)
		oWrap.addEventListener("touchend" ,fnEnd,false)
		
	},false)
},false)

console.log(document.documentElement.clientWidth+":::"+document.documentElement.clientHeight)
var oLi = document.getElementById("setHeight").getElementsByTagName("li");
for(var i = 0; i < oLi.length; i++){
	oLi[i].style.height = document.documentElement.clientHeight+"px";
}
document.getElementById("wrap").style.height = document.documentElement.clientHeight+"px";

function pageOne(){
	setTimeout(function(){
		$$('.w3a').css({transform: 'perspective(000px) rotateY(0deg) rotateX(0deg)',opacity:1});
		setTimeout(function(){
			$$('.w3b').css({transform: 'perspective(000px) rotateY(0deg) rotateX(0deg)',opacity:1});
			setTimeout(function(){
				$$('.w4a').css({transform: 'perspective(000px) rotateY(0deg) rotateX(0deg)',opacity:1});
				$$('.w4b').css({transform: 'perspective(000px) rotateY(0deg) rotateX(0deg)',opacity:1});
				$$('.ww5').css({transform: 'perspective(000px) rotateY(0deg) rotateX(0deg)',opacity:1});
			},800)
		},800)
	},800)
}
addLoadEvent(function(){
	pageOne()
})

$('.music').bind('touchstart', function (e) {
	if($(this).hasClass('music_ani')) {
		$(this).removeClass('music_ani');
		bg.pause();
	} else {
		$(this).addClass('music_ani');
		bg.play();
	}
});


var bg = document.createElement('audio');
bg.src = 'http://i2.yongche.name/u/download/201601/nianhuozhuanche.mp3?1452798600';
bg.loop = true;
bg.autoplay = true;
bg.play();
</script>
</body>
</html>